const st={capture:!1,passive:!1},ot=/\s+/g;function j(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}const K=j(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),at=j(/Edge/i),Z=j(/safari/i)&&!j(/chrome/i)&&!j(/android/i),ct=function(){let t=!1;return document.addEventListener("checkIfSupportPassive",null,{get passive(){return t=!0,!0}}),t}();function C(t,n,e){window.addEventListener?t.addEventListener(n,e,ct||!K?st:!1):window.attachEvent?t.attachEvent("on"+n,e):t["on"+n]=e}function y(t,n,e){window.removeEventListener?t.removeEventListener(n,e,ct||!K?st:!1):window.detachEvent?t.detachEvent("on"+n,e):t["on"+n]=null}function wt(t,n){if(!t||!t.getBoundingClientRect)return V();let e=t;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){let o=u(e);if(e.clientWidth<e.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll"))return!e.getBoundingClientRect||e===document.body?V():e}while(e=e.parentNode);return V()}function V(){return document.scrollingElement||document.documentElement}function E(t,n,e){if(!t.getBoundingClientRect&&t!==window)return;let o,r,l,i,s,d,g;if(t!==window&&t.parentNode&&t!==V()?(o=t.getBoundingClientRect(),r=o.top,l=o.left,i=o.bottom,s=o.right,d=o.height,g=o.width):(r=0,l=0,i=window.innerHeight,s=window.innerWidth,d=window.innerHeight,g=window.innerWidth),n&&t!==window){e=e||t.parentNode;do if(e&&e.getBoundingClientRect){let f=e.getBoundingClientRect();r-=f.top+parseInt(u(e,"border-top-width")),l-=f.left+parseInt(u(e,"border-left-width")),i=r+o.height,s=l+o.width;break}while(e=e.parentNode)}return{top:r,left:l,bottom:i,right:s,width:g,height:d}}function z(t,n,e,o){if(t){e=e||document;do{if(n!=null&&(n[0]===">"?t.parentNode===e&&U(t,n):U(t,n))||o&&t===e)return t;if(t===e)break}while(t=t.parentNode);return null}}function tt(t,n){if(!t||!n)return!1;if(n.compareDocumentPosition)return!!(n.compareDocumentPosition(t)&16);if(n.contains&&t.nodeType===1)return n.contains(t)&&n!==t;for(;t=t.parentNode;)if(t===n)return!0;return!1}function it(t,n){let e=t.lastElementChild;for(;e&&(e===m.ghost||u(e,"display")==="none"||n);)e=e.previousElementSibling;return e||null}function A(t,n){if(!t||!t.parentNode)return-1;let e=0;for(;t=t.previousElementSibling;)t!==m.ghost&&t.nodeName.toUpperCase()!=="TEMPLATE"&&u(t,"display")!=="none"&&(!n||U(t,n))&&e++;return e}function nt(t,n,e,o){let r=0,l=0,i=t.children;for(;r<i.length;){if(i[r]!==m.ghost&&u(i[r],"display")!=="none"&&z(i[r],e,t,!1)&&i[r]!==m.dragged){if(l===n)return i[r];l++}r++}return null}function ht(t,n){let e=u(t),o=parseInt(e.width)-parseInt(e.paddingLeft)-parseInt(e.paddingRight)-parseInt(e.borderLeftWidth)-parseInt(e.borderRightWidth),r=nt(t,0,n),l=nt(t,1,n),i=r&&u(r),s=l&&u(l),d=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+E(r).width,g=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+E(l).width,f=at||K?"cssFloat":"float";if(e.display==="flex")return e.flexDirection==="column"||e.flexDirection==="column-reverse"?"vertical":"horizontal";if(e.display==="grid")return e.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&i.float&&i.float!=="none"){let p=i.float==="left"?"left":"right";return l&&(s.clear==="both"||s.clear===p)?"vertical":"horizontal"}return r&&(i.display==="block"||i.display==="flex"||i.display==="table"||i.display==="grid"||d>=o&&e[f]==="none"||l&&e[f]==="none"&&d+g>o)?"vertical":"horizontal"}function P(t,n,e){if(t&&n)if(t.classList)t.classList[e?"add":"remove"](n);else{const o=(" "+t.className+" ").replace(ot," ").replace(" "+n+" "," ");t.className=(o+(e?" "+n:"")).replace(ot," ")}}function U(t,n){if(n){if(n[0]===">"&&(n=n.substring(1)),t)try{if(t.matches)return t.matches(n);if(t.msMatchesSelector)return t.msMatchesSelector(n);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(n)}catch{return!1}return!1}}function u(t,n,e){let o=t&&t.style;if(o){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(e=t.currentStyle),n===void 0?e:e[n];!(n in o)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),o[n]=e+(typeof e=="string"?"":"px")}}function St(t,n){let e="";if(typeof t=="string")e=t;else do{let r=u(t,"transform");r&&r!=="none"&&(e=r+" "+e)}while(!1);const o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(e)}function rt(t,n){return Math.round(t.top)===Math.round(n.top)&&Math.round(t.left)===Math.round(n.left)&&Math.round(t.height)===Math.round(n.height)&&Math.round(t.width)===Math.round(n.width)}function vt(t){return t.offsetWidth}function bt(t,n){return t.compareDocumentPosition?t.compareDocumentPosition(n):t.contains?(t!=n&&t.contains(n)&&16)+(t!=n&&n.contains(t)&&8)+(t.sourceIndex>=0&&n.sourceIndex>=0?(t.sourceIndex<n.sourceIndex&&4)+(t.sourceIndex>n.sourceIndex&&2):1):0}function et(t,n){const e=bt(t,n);return e===2?1:e===4?-1:0}function F(t){t.preventDefault!==void 0&&t.cancelable&&t.preventDefault()}function I({sortable:t,name:n,evt:e}){const o=t.options[n];if(typeof o=="function")return o(Object.assign({},e))}function G(t,...n){return typeof t=="function"?t(...n):t}const D="Sortable"+Date.now();function ut(t){this.options=t,this.scrollEl=null,this.autoScrollInterval=null}ut.prototype={nulling(){this.autoScrollInterval&&(clearInterval(this.autoScrollInterval),this.autoScrollInterval=null)},onStarted(){this.nulling(),this.autoScrollInterval=setInterval(this.autoScroll.bind(this))},onMove(t,n,e,o){const r=e?e[D].options:o;if(e&&!r.autoScroll){this.scrollEl=null;return}this.options=r,this.scrollEl=wt(t),this.moveEvent=n},autoScroll(){let t=this.options,n=this.moveEvent,e=this.scrollEl,o=t.scrollThreshold,r=t.scrollSpeed;if(!e||n.clientX===void 0||n.clientY===void 0)return;const l=E(e);if(!l)return;const{clientX:i,clientY:s}=n,{top:d,right:g,bottom:f,left:p,height:_,width:J}=l;if(s<d||i>g||s>f||i<p)return;const{scrollTop:Q,scrollLeft:pt,scrollHeight:mt,scrollWidth:gt}=e;e.scrollLeft+=this.getScrollOffset(i,p,g,o,r.x,pt,gt,J),e.scrollTop+=this.getScrollOffset(s,d,f,o,r.y,Q,mt,_)},getScrollOffset(t,n,e,o,r,l,i,s){return l>0&&t>=n&&t<=n+o?Math.max(-1,(t-n)/o-1)*r:l+s<i&&t<=e&&t>=e-o?Math.min(1,(t-e)/o+1)*r:0}};function dt(t){this.options=t,this.animationStack=[],this.animationCallbackId=null}dt.prototype={collect(t){if(!t)return;let n=E(t),e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=Math.min(n.right,e),l=Math.min(n.bottom,o),i=Array.prototype.slice.call(t.children),s=[];for(let d=0,g=i.length;d<g;d++){const f=i[d];if(f===m.ghost||u(f,"display")==="none")continue;const p=E(f);if(!(p.bottom<0||p.right<0)){if(s.length===0&&f.previousElementSibling){let _=f.previousElementSibling;do if(_&&_!==m.ghost&&u(_,"display")!=="none")break;while(_=_.previousElementSibling);_&&s.push({el:_,rect:E(_)})}if(p.top-p.height>l||p.left-p.width>r){s.push({el:f,rect:p});break}s.push({el:f,rect:p})}}this.animationStack.push(s)},animate(t){let n=this.animationStack.pop(),e=this.options.animation;if(!n||!e){clearTimeout(this.animationCallbackId),typeof t=="function"&&t();return}let o=0;n.forEach(r=>{let l=0,i=r.el,s=E(i),d=r.rect,g=i.prevToRect,f=i.prevFromRect;if(i.animating&&f&&g&&rt(d,s)){const p=St(i);if(p){const _={top:s.top-p.f,left:s.left-p.e},J=lt(_,s),Q=lt(f,g);l=J/Q*e}}rt(d,s)||(i.prevFromRect=d,i.prevToRect=s,l||(l=e),this.execute(i,d,s,l)),l&&(o=Math.max(o,l))}),clearTimeout(this.animationCallbackId),o?this.animationCallbackId=setTimeout(()=>{typeof t=="function"&&t()},o):typeof t=="function"&&t()},execute(t,n,e,o){let r=this.options.easing||"",l=n.left-e.left,i=n.top-e.top;u(t,"transition",""),u(t,"transform",`translate3d(${l}px, ${i}px, 0)`),this.repaintDummy=vt(t),u(t,"transition",`transform ${o}ms ${r}`),u(t,"transform","translate3d(0px, 0px, 0px)"),typeof t.animating=="number"&&clearTimeout(t.animating),t.animating=setTimeout(()=>{u(t,"transition",""),u(t,"transform",""),t.prevFromRect=null,t.prevToRect=null,t.animating=null},o)}};function lt(t,n){return Math.sqrt(Math.pow(t.left-n.left,2)+Math.pow(t.top-n.top,2))}let q=[],W,b,c,h,L,S,a,v,T,w,X,O,$,Y,x,N,k,M,R,H,B;function ft(t){let n={},e=t.group;(!e||typeof e!="object")&&(e={name:e,pull:!0,put:!0,revertDrag:!0}),n.name=e.name,n.pull=e.pull??!0,n.put=e.put??!0,n.revertDrag=e.revertDrag??!0,t.group=n}function yt(t,n){let e;return q.reduce((o,r)=>{const l=r[D].options.emptyInsertThreshold;if(l==null)return;const i=E(r),s=t>=i.left-l&&t<=i.right+l,d=n>=i.top-l&&n<=i.bottom+l;return s&&d&&(!e||e&&i.left>=e.left&&i.right<=e.right&&i.top>=e.top&&i.bottom<=e.bottom)&&(o=r,e=i),o},null)}function Et(t){const n=N||x;return!(t.clientX!==void 0&&t.clientY!==void 0&&Math.abs(t.clientX-n.clientX)<=0&&Math.abs(t.clientY-n.clientY)<=0)}function m(t,n){if(!(t&&t.nodeType&&t.nodeType===1))throw`Sortable-dnd: \`el\` must be an HTMLElement, not ${{}.toString.call(t)}`;t[D]=this,this.el=t,this.options=n=Object.assign({},n);const e={store:null,group:"",handle:null,draggable:">*",sortable:!0,disabled:!1,customGhost:null,lockAxis:"",direction:"",animation:150,easing:"",ghostClass:"",ghostStyle:{},chosenClass:"",placeholderClass:"",autoScroll:!0,scrollThreshold:55,scrollSpeed:{x:10,y:10},delay:0,delayOnTouchOnly:!1,swapOnDrop:!0,removeCloneOnDrop:!0,dropOnAnimationEnd:!1,appendToBody:!1,supportTouch:"ontouchstart"in window,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,emptyInsertThreshold:-1};for(let o in e)!(o in n)&&(n[o]=e[o]);ft(n);for(let o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));C(t,n.supportTouch?"touchstart":"mousedown",this._onDrag),this.autoScroller=new ut(n),this.animator=new dt(n),q.push(t)}m.prototype={constructor:m,_onDrag(t){let n=this.el,e=this.options,o=e.handle,r=t.touches&&t.touches[0],l=(r||t).target,i=n.ownerDocument;if(c||e.disabled||!e.group.pull||/mousedown|pointerdown/.test(t.type)&&t.button!==0||Z&&l&&l.tagName.toUpperCase()==="SELECT")return;const s=z(l,e.draggable,n);!s||s.animating||(x={event:t,clientX:(r||t).clientX,clientY:(r||t).clientY},c=s,M=r?c:document,C(M,"mouseup",this._onDrop),C(M,"touchend",this._onDrop),C(M,"touchcancel",this._onDrop),!(typeof o=="function"&&!o(t)||typeof o=="string"&&!z(l,o,c))&&(e.delay&&(!e.delayOnTouchOnly||r)&&!(at||K)?(C(i,"touchmove",this._delayedMoveHandler),C(i,"mousemove",this._delayedMoveHandler),C(i,"mouseup",this._cancelStart),C(i,"touchend",this._cancelStart),C(i,"touchcancel",this._cancelStart),this._dragStartTimer=setTimeout(()=>this._onStart(r,t),e.delay)):this._onStart(r,t)))},_delayedMoveHandler(t){const n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-x.clientX),Math.abs(n.clientY-x.clientY))>=Math.floor(this.options.touchStartThreshold/(window.devicePixelRatio||1))&&this._cancelStart()},_cancelStart(){let t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),y(t,"touchmove",this._delayedMoveHandler),y(t,"mousemove",this._delayedMoveHandler),y(t,"mouseup",this._cancelStart),y(t,"touchend",this._cancelStart),y(t,"touchcancel",this._cancelStart)},_onStart(t,n){F(n);let e=this.el,o=this.options,r=A(c);O=r,$=r,Y=r,W=e,b=e,S=e,T=c,w=c.parentNode,X=o.group.pull,H=c,R={to:e,target:c,newIndex:r,relative:0},a=c.cloneNode(!0),m.dragged=c,m.clone=a,m.active=this,I({sortable:this,name:"onChoose",evt:this._getEventProperties(n)}),P(c,o.chosenClass,!0),C(M,t?"touchmove":"mousemove",this._nearestSortable);try{document.selection?setTimeout(()=>document.selection.empty(),0):window.getSelection().removeAllRanges()}catch{}C(document,"selectstart",F),Z&&u(document.body,"user-select","none")},_onStarted(){let t=this.options;this.animator.collect(w),this._appendGhost(),P(a,t.chosenClass,!0),P(a,t.placeholderClass,!0),c.parentNode.insertBefore(a,c),u(c,"display","none"),I({sortable:this,name:"onDrag",evt:this._getEventProperties(x.event)}),this.animator.animate(),this.autoScroller.onStarted()},_appendGhost(){if(v)return;let t=this.options;const n=t.appendToBody?document.body:this.el;v=(G(t.customGhost,a)||a).cloneNode(!0),P(v,t.ghostClass,!0);const o=E(c),r=Object.assign({position:"fixed",top:o.top,left:o.left,width:o.width,height:o.height,margin:0,zIndex:1e5,opacity:"0.8",overflow:"hidden",boxSizing:"border-box",transform:"",transition:"",pointerEvents:"none"},t.ghostStyle);for(let s in r)u(v,s,r[s]);m.ghost=v,n.appendChild(v);const l=(x.clientX-o.left)/parseInt(v.style.width)*100,i=(x.clientY-o.top)/parseInt(v.style.height)*100;u(v,"transform-origin",`${l}% ${i}%`),u(v,"will-change","transform")},_nearestSortable(t){F(t);let n=t.touches&&t.touches[0],e=n||t;if(!c||!Et(e))return;!N&&this._onStarted();let o=this.options.lockAxis,r=o==="x"?x.clientX:e.clientX,l=o==="y"?x.clientY:e.clientY,i=document.elementFromPoint(r,l),s=r-x.clientX,d=l-x.clientY;N={event:t,clientX:r,clientY:l},u(v,"transform",`translate3d(${s}px, ${d}px, 0)`);const g=yt(r,l);g&&g[D]._onMove(t,i),this.autoScroller.onMove(i,N,g,this.options)},_allowPut(){let t=this.options.group,n=S[D].options.group;return this.el===S?!0:t.put?t.put.join&&t.put.indexOf(n.name)>-1||n.name&&t.name&&n.name===t.name:!1},_getDirection(){let t=this.options.draggable,n=this.options.direction;return n?G(n,N.event,a,this):ht(w,t)},_allowSwap(){let t=E(h),n=this._getDirection()==="vertical",e=n?"top":"left",o=n?"bottom":"right",r=h[n?"offsetHeight":"offsetWidth"],l=n?N.clientY:N.clientX,i=l>=t[e]&&l<t[o]-r/2?-1:1,s=nt(w,0,this.options.draggable),d=it(w),g=E(s),f=E(d);if(h===w||tt(w,h))return a===s&&l<g[e]?(L=h,!0):a===d&&l>f[o]?(L=h.nextSibling,!0):!1;const p=et(a,h);return L=p<0?h.nextSibling:h,k!==h?(B=i,!0):B!==i?(B=i,i<0?p>0:p<0):!1},_onMove(t,n){let e=this.el,o=this.options;if(!(o.disabled||!this._allowPut())){if(h=z(n,o.draggable,e),I({sortable:this,name:"onMove",evt:this._getEventProperties(t,{target:h})}),!o.sortable&&e===S){b!==S&&(h=k=c,B=0,this._onInsert(t));return}if(e!==b&&(n===e||!it(e))){h=k=null,this._onInsert(t);return}if(!(!h||h.animating||tt(h,a)||!this._allowSwap())){if(h===a||L===a){k=h;return}e!==b?this._onInsert(t):h!==c&&this._onChange(t),k=h}}},_onInsert(t){let n=this.el,e=h||a,o=X==="clone"&&n!==S&&b===S,r=X==="clone"&&n===S&&b!==S,l=tt(h,document),i=h===c&&!l,s=b[D],d=S[D];W=n,O=A(a),T=e,w=l?h.parentNode:n,s.animator.collect(a.parentNode),this.animator.collect(w),o&&(R.target=H,R.newIndex=O,R.relative=H===c?0:et(a,H),u(c,"display",""),d.options.group.revertDrag||a.parentNode.insertBefore(c,a)),r&&(O=A(c),u(c,"display","none")),u(a,"display",i?"none":""),h&&l?w.insertBefore(a,B<0?h:h.nextSibling):w.appendChild(a),$=i?Y:A(a),o&&d.options.group.revertDrag&&(R.target=c,R.newIndex=Y,R.relative=0,I({sortable:d,name:"onChange",evt:this._getEventProperties(t,{to:S,target:c,newIndex:Y,revertDrag:!0})})),o||I({sortable:s,name:"onRemove",evt:this._getEventProperties(t,{newIndex:-1})}),r&&e!==c&&(H=e,I({sortable:this,name:"onChange",evt:this._getEventProperties(t,{from:S,backToOrigin:!0})})),r||I({sortable:this,name:"onAdd",evt:this._getEventProperties(t,{oldIndex:-1})}),s.animator.animate(),this.animator.animate(),b=n},_onChange(t){let n=this.el;this.animator.collect(w),O=A(a),w=h.parentNode,T=h,n===S&&(H=h),w.insertBefore(a,L),$=A(a),I({sortable:this,name:"onChange",evt:this._getEventProperties(t)}),this.animator.animate(),b=n},_onDrop(t){let n=this.options;if(this._cancelStart(),y(M,"touchmove",this._nearestSortable),y(M,"mousemove",this._nearestSortable),y(M,"mouseup",this._onDrop),y(M,"touchend",this._onDrop),y(M,"touchcancel",this._onDrop),y(document,"selectstart",F),Z&&u(document.body,"user-select",""),v&&v.parentNode&&v.parentNode.removeChild(v),S)if(b=S,O=Y,T===a&&(T=c),P(c,n.chosenClass,!1),I({sortable:this,name:"onUnchoose",evt:this._getEventProperties(t)}),N){this.animator.collect(w),P(a,n.chosenClass,!1),P(a,n.placeholderClass,!1);const e=this._getEventProperties(t);!n.dropOnAnimationEnd&&this._onEnd(e),this.animator.animate(()=>{n.dropOnAnimationEnd&&this._onEnd(e)})}else this._nulling();else this._nulling()},_onEnd(t){let n=this.options,e=X==="clone",o=b===W;(!e||o)&&G(n.swapOnDrop,t)&&w.insertBefore(c,a),(!e||o)&&G(n.removeCloneOnDrop,t)&&a&&a.parentNode&&a.parentNode.removeChild(a),u(c,"display",""),b!==W&&I({sortable:b[D],name:"onDrop",evt:Object.assign({},t,e?R:{newIndex:-1})}),I({sortable:W[D],name:"onDrop",evt:Object.assign({},t,o?{}:{oldIndex:-1})}),this._nulling()},_getEventProperties(t,n={}){let e={};return e.event=t,e.to=W,e.from=b,e.node=c,e.clone=a,e.target=T,e.oldIndex=O,e.newIndex=$,e.pullMode=X,Object.assign(e,n),e.relative=T===c?0:et(a,T),e},_nulling(){W=b=c=h=L=S=a=v=T=w=X=O=$=Y=x=N=k=M=R=H=B=m.clone=m.ghost=m.active=m.dragged=null,this.autoScroller.nulling()},destroy(){this._cancelStart(),this._nulling(),y(this.el,"touchstart",this._onDrag),y(this.el,"mousedown",this._onDrag);const t=q.indexOf(this.el);t>-1&&q.splice(t,1),this.el[D]=this.animator=this.autoScroller=null},option(t,n){if(n===void 0)return this.options[t];this.options[t]=n,this.animator.options[t]=n,this.autoScroller.options[t]=n,t==="group"&&ft(this.options)}};m.utils={on:C,off:y,css:u,index:A,matches:U,closest:z,getRect:E,toggleClass:P,detectDirection:ht};m.get=function(t){return t[D]};m.create=function(t,n){return new m(t,n)};export{m as default};
