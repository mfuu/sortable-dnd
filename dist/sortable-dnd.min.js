!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Sortable=e()}(this,function(){"use strict";function A(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function a(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?A(Object(i),!0).forEach(function(t){var e,n;e=o,n=i[t=t],(t=function(t){t=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):A(Object(i)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(i,t))})}return o}function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var R={capture:!1,passive:!1},H=/\s+/g,i={start:["touchstart","mousedown"],move:["touchmove","mousemove"],end:["touchend","touchcancel","mouseup"]};function t(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var e,n,s,l,c,m=t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),L=t(/Edge/i),B=t(/safari/i)&&!t(/chrome/i)&&!t(/android/i),k=(e=!1,document.addEventListener("checkIfSupportPassive",null,{get passive(){return e=!0}}),e),W="undefined"==typeof window||"undefined"==typeof document?{}:(n=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],n=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||""===n.OLink&&["","o"])[1],{dom:"WebKit|Moz|MS|O".match(new RegExp("("+n+")","i"))[1],lowercase:n,css:"-"+n+"-",js:n[0].toUpperCase()+n.substr(1)});function z(t,e){t.style["".concat(W.css,"transition-duration")]=null==e?"":"".concat(e,"ms")}function h(t,e){t.style["".concat(W.css,"transform")]=e?"".concat(e):""}function u(t,e,n){window.addEventListener?t.addEventListener(e,n,!(!k&&m)&&R):window.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function o(t,e,n){window.removeEventListener?t.removeEventListener(e,n,!(!k&&m)&&R):window.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function V(t){var e=t,n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0],t=n?document.elementFromPoint(n.clientX,n.clientY):t.target;return!n||"clientX"in e||(e.clientX=n.clientX,e.clientY=n.clientY,e.pageX=n.pageX,e.pageY=n.pageY,e.screenX=n.screenX,e.screenY=n.screenY),{touch:n,event:e,target:t}}function d(t,e){for(var n={top:0,left:0,height:t.offsetHeight,width:t.offsetWidth};n.top+=t.offsetTop,n.left+=t.offsetLeft,(t=t.parentNode)&&t!==e;);return n}function q(){return document.scrollingElement||document.documentElement}function g(t,e,n){var o,i,r,s,l,a,c,h=1<arguments.length&&void 0!==e?e:{},u=2<arguments.length?n:void 0;if(t.getBoundingClientRect||t===window){if(t!==window&&t.parentNode&&t!==q()){if(i=(o=t.getBoundingClientRect()).top,r=o.left,s=o.bottom,l=o.right,a=o.height,c=o.width,h.parent&&t.parentNode!==t.ownerDocument.body)for(var d,p=t.parentNode;p&&p.getBoundingClientRect&&p!==t.ownerDocument.body;){if((d=p.getBoundingClientRect()).height<a)return i=d.top,r=d.left,s=d.bottom,l=d.right,a=d.height,{top:i,left:r,bottom:s,right:l,width:c=d.width,height:a};p=p.parentNode}}else r=i=0,s=window.innerHeight,l=window.innerWidth,a=window.innerHeight,c=window.innerWidth;if((h.block||h.relative)&&t!==window&&(u=u||t.parentNode,!m))do{if(u&&u.getBoundingClientRect&&("none"!==y(u,"transform")||h.relative&&"static"!==y(u,"position"))){var f=u.getBoundingClientRect();i-=f.top+parseInt(y(u,"border-top-width")),r-=f.left+parseInt(y(u,"border-left-width")),s=i+o.height,l=r+o.width;break}}while(u=u.parentNode);return{top:i,left:r,bottom:s,right:l,width:c,height:a}}}function p(t,e,n,o){if(t){n=n||document;do{if(null==e){var i=Array.prototype.slice.call(n.children),r=i.indexOf(t);if(-1<r)return i[r];for(var s=0;s<i.length;s++)if(G(t,i[s]))return i[s]}else if((">"!==e[0]||t.parentNode===n)&&v(t,e)||o&&t===n)return t}while(t=t.parentNode)}return null}function G(t,e){if(t&&e){if(e.compareDocumentPosition)return e===t||16&e.compareDocumentPosition(t);if(e.contains&&1===t.nodeType)return e.contains(t)&&e!==t;for(;t=t.parentNode;)if(t===e)return 1}}function U(t,e,n,o){for(var i=0,r=0,s=t.children;i<s.length;){if(s[i]!==F.ghost&&"none"!==y(s[i],"display")&&p(s[i],n,t,!1)&&(o||s[i]!==F.dragged)){if(r===e)return s[i];r++}i++}return null}function K(t,e){var n,o=y(t),i=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),r=U(t,0,e),t=U(t,1,e),e=r&&y(r),s=t&&y(t),l=e&&parseInt(e.marginLeft)+parseInt(e.marginRight)+g(r).width,a=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+g(t).width,c=L||m?"cssFloat":"float";return"flex"===o.display?"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal":"grid"===o.display?o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":r&&e.float&&"none"!==e.float?(n="left"===e.float?"left":"right",!t||"both"!==s.clear&&s.clear!==n?"horizontal":"vertical"):r&&("block"===e.display||"flex"===e.display||"table"===e.display||"grid"===e.display||i<=l&&"none"===o[c]||t&&"none"===o[c]&&i<l+a)?"vertical":"horizontal"}function f(t,e,n){var o;t&&e&&(t.classList?t.classList[n?"add":"remove"](e):(o=(" "+t.className+" ").replace(H," ").replace(" "+e+" "," "),t.className=(o+(n?" "+e:"")).replace(H," ")))}function v(t,e){if(e&&(">"===e[0]&&(e=e.substring(1)),t))try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return}}function y(t,e,n){var o=t&&t.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];o[e=e in o||-1!==e.indexOf("webkit")?e:"-webkit-"+e]=n+("string"==typeof n?"":"px")}}function Z(t,e){function n(t,e,n){return t===e||e-n<=t&&t<=e+n}var o=Math.abs(t.width-e.width),i=Math.abs(t.height-e.height),o=!n(t.left,e.left,o),t=!n(t.top,e.top,i);return o||t}function r(t,e){e=e;t=(t=t).compareDocumentPosition?t.compareDocumentPosition(e):t.contains?(t!=e&&t.contains(e)&&16)+(t!=e&&e.contains(t)&&8)+(0<=t.sourceIndex&&0<=e.sourceIndex?(t.sourceIndex<e.sourceIndex&&4)+(t.sourceIndex>e.sourceIndex&&2):1)+0:0;return 2===t?1:4===t?-1:0}function J(t){void 0!==t.preventDefault&&t.cancelable&&t.preventDefault()}function Q(t){this.options=t,this.autoScrollAnimationFrame=null}function $(t){this.options=t,this.animations=[]}function tt(t){this.options=t||{},this.selectedElements=[]}function et(t){this.helper=null,this.distance=t}window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,17)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),Q.prototype={clear:function(){null!=this.autoScrollAnimationFrame&&(cancelAnimationFrame(this.autoScrollAnimationFrame),this.autoScrollAnimationFrame=null)},update:function(t,e,n){var o=this;cancelAnimationFrame(this.autoScrollAnimationFrame),this.autoScrollAnimationFrame=requestAnimationFrame(function(){e&&n&&o.autoScroll(t,n),o.update(t,e,n)})},autoScroll:function(t,e){var n,o,i,r,s,l,a,c,h,u,d,p,f;t&&void 0!==e.clientX&&void 0!==e.clientY&&(u=g(t))&&(n=e.clientX,e=e.clientY,o=u.top,i=u.right,r=u.bottom,s=u.left,p=u.height,u=u.width,e<o||i<n||r<e||n<s||(l=(a=this.options).scrollThreshold,a=a.scrollSpeed,d=t.scrollTop,c=t.scrollLeft,f=t.scrollHeight,h=0<d&&o<=e&&e<=o+l,u=c+u<t.scrollWidth&&n<=i&&i-l<=n,d=d+p<f&&e<=r&&r-l<=e,(f=p=0)<c&&s<=n&&n<=s+l&&(p=Math.floor(Math.max(-1,(n-s)/l-1)*a.x)),u&&(p=Math.ceil(Math.min(1,(n-i)/l+1)*a.x)),h&&(f=Math.floor(Math.max(-1,(e-o)/l-1)*a.y)),(f=d?Math.ceil(Math.min(1,(e-r)/l+1)*a.y):f)&&(t.scrollTop+=f),p&&(t.scrollLeft+=p)))}},$.prototype={collect:function(t,e,n,o){if(n){var i=Array.prototype.slice.call(n.children),n=this._getRange(i,t,e),t=n.start,r=n.end;this.animations.length=0;for(var s=t;s<=r;s++){var l=i[s];l&&"none"!==y(l,"display")&&l!==o&&l!==F.ghost&&this.animations.push({node:l,rect:g(l)})}}},animate:function(){for(var t=0,e=this.animations.length;t<e;t++){var n=this.animations[t],o=n.node,n=n.rect;this._excute(o,n)}},_excute:function(t,e){var n=e.left,e=e.top,o=g(t),e=e-o.top,n=n-o.left,o=(z(t),h(t,"translate3d(".concat(n,"px, ").concat(e,"px, 0)")),t.offsetWidth,this.options.animation);z(t,o),h(t,"translate3d(0px, 0px, 0px)"),clearTimeout(t.animated),t.animated=setTimeout(function(){z(t),h(t,""),t.animated=null},o)},_getRange:function(t,e,n){var o,e=t.indexOf(e),n=t.indexOf(n);return n<e&&(e=(o=[n,e])[0],n=o[1]),e<0&&(e=n,n=t.length-1),{start:e,end:n=n<0?t.length-1:n}}},tt.prototype={destroy:function(){s=l=c=null},active:function(){return!!l},select:function(t){f(t,this.options.selectedClass,!0),this.selectedElements.push(t),this.selectedElements.sort(r)},deselect:function(t){var e=this.selectedElements.indexOf(t);-1<e&&(f(t,this.options.selectedClass,!1),this.selectedElements.splice(e,1))},addSelected:function(t){var e=this;t.forEach(function(t){return e.selectedElements.push(t)})},removeSelected:function(e){this.selectedElements=this.selectedElements.filter(function(t){return e.indexOf(t)<0})},getSelectedElements:function(){return this.selectedElements},getEmits:function(){var t={from:{},to:{}};return l&&s&&(t.from=a({},l),t.to=a({},s)),t},getHelper:function(){var n;return l?(n=document.createElement("div"),this.selectedElements.forEach(function(t,e){t=t.cloneNode(!0);t.style="\n        opacity: ".concat(0===e?1:.5,";\n        position: absolute;\n        z-index: ").concat(e,";\n        left: 0;\n        top: 0;\n        bottom: 0;\n        right: 0;\n      "),n.appendChild(t)}),n):null},getOnEndParams:function(){return l?{changed:l.sortable.el!==s.sortable.el||this._offsetChanged(l.nodes,s.nodes)}:{}},onDrag:function(e,t){var n;this._isMultiple()&&(this.selectedElements.sort(r),n=this.selectedElements.map(function(t){return{node:t,rect:g(t),offset:d(t,e)}}),l={sortable:t,nodes:n},s={sortable:t,nodes:n},c=this.selectedElements)},onStarted:function(t){var e;l&&(t.animator.collect(e=F.dragged,null,e.parentNode),c.forEach(function(t){t!=e&&y(t,"display","none")}),t.animator.animate())},toggleElementsVisible:function(t){l&&(t?(t=c.indexOf(F.dragged),this._displayElements(c,t,F.dragged)):c.forEach(function(t){t!=F.dragged&&y(t,"display","none")}))},onChange:function(t,e){var n,o;l&&(n=g(t),o=d(t,e.el),s={sortable:e,nodes:c.map(function(t){return{node:t,rect:n,offset:o}})})},onDrop:function(t,e,n){var o,i,r;l&&s&&(l.sortable=t.sortable,t=F.clone,s.sortable.animator.collect(o=F.dragged,null,o.parentNode),i=c.indexOf(o),r=null,n&&t&&(y(t,"display","none"),r=c.map(function(t){return t.cloneNode(!0)}),this._displayElements(r,i,t)),this._displayElements(c,i,o),s.nodes=(r||c).map(function(t){return{node:t,rect:g(t),offset:d(t,e)}}),s.sortable.animator.animate(),n)&&(s.sortable.multiplayer.addSelected(r||c),t||l.sortable.multiplayer.removeSelected(c))},onSelect:function(t,e,n){var o,i;F.dragged&&this._isMouseClick(t,e)&&(t=F.dragged,i=this.options.selectHandle,o=V(e).target,"function"==typeof i&&!i(e)||"string"==typeof i&&!v(o,i)||(o=this.selectedElements.indexOf(t),f(t,this.options.selectedClass,o<0),i=a(a({},n),{},{event:e}),o<0?(this.selectedElements.push(t),n.sortable._dispatchEvent("onSelect",i)):(this.selectedElements.splice(o,1),n.sortable._dispatchEvent("onDeselect",i)),this.selectedElements.sort(r)))},_displayElements:function(t,e,n){for(var o,i=0;i<t.length;i++)y(t[i],"display",""),i<e?n.parentNode.insertBefore(t[i],n):(o=0<i?t[i-1]:n,n.parentNode.insertBefore(t[i],o.nextSibling))},_isMultiple:function(){return this.options.multiple&&this.selectedElements.length&&-1<this.selectedElements.indexOf(F.dragged)},_isMouseClick:function(t,e){var n=e.clientX-t.clientX,e=e.clientY-t.clientY,t=Math.sqrt(n*n+e*e);return 0<=t&&t<=1},_offsetChanged:function(t,n){return!!t.find(function(e){var t=n.find(function(t){return t.node===e.node});return Z(e.offset,t.offset)})}},et.prototype={get node(){return this.helper},destroy:function(){this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.helper=this.distance=null},move:function(t,e){this.helper&&h(this.helper,"translate3d(".concat(t,"px, ").concat(e,"px, 0)"))},init:function(t,e,n,o){if(!this.helper){var i,r=o.fallbackOnBody,s=o.ghostClass,o=o.ghostStyle,r=r?document.body:n,l=(this.helper=e.cloneNode(!0),f(this.helper,s,!0),a({position:"fixed",top:t.top,left:t.left,width:t.width,height:t.height,minWidth:t.width,minHeight:t.height,opacity:"0.8",overflow:"hidden","z-index":"100000","box-sizing":"border-box","pointer-events":"none"},o));for(i in l)y(this.helper,i,l[i]);n=this.helper,e="none",n.style["".concat(W.css,"transition")]=e?"none"===e?"none":"".concat(e):"",h(this.helper,"translate3d(0px, 0px, 0px)"),r.appendChild(this.helper);s=this.distance.x/parseInt(this.helper.style.width)*100,t=this.distance.y/parseInt(this.helper.style.height)*100;y(this.helper,"transform-origin","".concat(s,"% ").concat(t,"%")),y(this.helper,"transform","translateZ(0)"),y(this.helper,"will-change","transform")}}};var b,w,E,S,_,x,nt,C,O,D,T,M,N,I,P,ot,X="Sortable"+Date.now(),Y=[],it=function(t){var e={},n=t.group;n&&"object"==j(n)||(n={name:n,pull:!0,put:!0,revertClone:!0}),e.name=n.name,e.pull=n.pull,e.put=n.put,e.revertClone=n.revertClone,t.group=e};function F(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable-dnd: `el` must be an HTMLElement, not ".concat({}.toString.call(t));(t[X]=this).el=t,this.options=e=Object.assign({},e);var n,o,i={disabled:!1,group:"",animation:150,draggable:null,handle:null,multiple:!1,selectHandle:null,customGhost:null,direction:function(){return K(t,e.draggable)},autoScroll:!0,scrollThreshold:55,scrollSpeed:{x:10,y:10},delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,ghostClass:"",ghostStyle:{},chosenClass:"",selectedClass:"",swapOnDrop:!0,fallbackOnBody:!1,supportTouch:"ontouchstart"in window,emptyInsertThreshold:5};for(n in i)n in this.options||(this.options[n]=i[n]);for(o in it(e),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));var r=this.options.supportTouch;u(t,r?"touchstart":"mousedown",this._onDrag),Y.push(t),this.autoScroller=new Q(this.options),this.multiplayer=new tt(this.options),this.animator=new $(this.options)}return F.prototype={constructor:F,destroy:function(){var e=this;this._dispatchEvent("onDestroy",{sortable:this}),i.start.forEach(function(t){return o(e.el,t,e._onDrag)}),Y.splice(Y.indexOf(this.el),1),this._clearState(),this.el[X]=this.animator=this.multiplayer=this.autoScroller=null},option:function(t,e){if(void 0===e)return this.options[t];this.options[t]=e,this.animator.options[t]=e,this.multiplayer.options[t]=e,this.autoScroller.options[t]=e,"group"===t&&it(this.options)},select:function(t){this.multiplayer.select(t)},deselect:function(t){this.multiplayer.deselect(t)},getSelectedElements:function(){return this.multiplayer.getSelectedElements()},_onDrag:function(t){var e,n,o,i;this.options.disabled||!this.options.group.pull||/mousedown|pointerdown/.test(t.type)&&0!==t.button||(e=(t=V(t)).touch,n=t.event,(t=t.target)===this.el)||B&&t&&"SELECT"===t.tagName.toUpperCase()||(_=p(t,this.options.draggable,this.el))&&!_.animated&&(I=e?_:document,C=_.cloneNode(!0),O=_.parentNode,F.dragged=_,((D=n).sortable=this).multiplayer.onDrag(this.el,this),o=g(_),i=d(_,this.el),w={sortable:this,node:_,rect:o,offset:i},b={sortable:this,node:_,rect:o,offset:i},E=new et({x:n.clientX-o.left,y:n.clientY-o.top}),u(I,"touchend",this._onDrop),u(I,"touchcancel",this._onDrop),u(I,"mouseup",this._onDrop),"function"!=typeof(i=this.options.handle)||i(n))&&("string"!=typeof i||v(t,i))&&this._prepareStart(e)},_prepareStart:function(t){var e=this,n=this.options,o=n.delay,n=n.delayOnTouchOnly;!o||n&&!t||L||m?this._onStart(t):(i.move.forEach(function(t){return u(e.el.ownerDocument,t,e._delayMoveHandler)}),i.end.forEach(function(t){return u(e.el.ownerDocument,t,e._cancelStart)}),ot=setTimeout(function(){return e._onStart(t)},o))},_delayMoveHandler:function(t){t=t.touches?t.touches[0]:t;Math.max(Math.abs(t.clientX-D.clientX),Math.abs(t.clientY-D.clientY))>=Math.floor(this.options.touchStartThreshold/(window.devicePixelRatio||1))&&this._cancelStart()},_cancelStart:function(){var e=this;clearTimeout(ot),i.move.forEach(function(t){return o(e.el.ownerDocument,t,e._delayMoveHandler)}),i.end.forEach(function(t){return o(e.el.ownerDocument,t,e._cancelStart)})},_onStart:function(t){S=this.el,"clone"===this.options.group.pull&&(N=!0,F.clone=C),u(I,t?"touchmove":"mousemove",this._nearestSortable);try{document.selection?setTimeout(function(){return document.selection.empty()},0):window.getSelection().removeAllRanges()}catch(t){}},_onStarted:function(){(F.active=this)._dispatchEvent("onDrag",a(a({},this._getFromTo()),{},{event:D})),this.multiplayer.onStarted(this);var t=this._getGhostElement();E.init(w.rect,t,this.el,this.options),F.ghost=E.node,y(_,"display","none"),_.parentNode.insertBefore(C,_),f(C,this.options.chosenClass,!0),B&&y(document.body,"user-select","none")},_getGhostElement:function(){var t=this.options.customGhost;return"function"==typeof t?t((t=this.multiplayer.getSelectedElements()).length?t:[_]):this.multiplayer.getHelper()||_},_nearestSortable:function(t){var e,n,o,i,r,s,l;J(t),!D||!_||(e=T||D,n=(o=t).clientX,o=o.clientY,i=n-e.clientX,e=o-e.clientY,void 0!==n&&void 0!==o&&Math.abs(i)<=0&&Math.abs(e)<=0)||(T||this._onStarted(),o=(n=V(t)).event,i=n.target,T=o,E.move(o.clientX-D.clientX,o.clientY-D.clientY),this._autoScroll(i),r=o.clientX,s=o.clientY,Y.some(function(t){var e,n,o=t[X].options.emptyInsertThreshold;if(o)return n=g(t,{parent:!0}),e=r>=n.left-o&&r<=n.right+o,n=s>=n.top-o&&s<=n.bottom+o,e&&n?l=t:void 0}),l&&l[X]._onMove(o,i))},_autoScroll:function(t){this.options.autoScroll&&(t=function(t,e){if(t&&t.getBoundingClientRect){var n=t,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=y(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return q();if(o||e)return n;o=!0}}}while(n=n.parentNode)}return q()}(t,!0),this.autoScroller.update(t,D,T))},_allowPut:function(){var t,e,n;return D.sortable.el===this.el||!!this.options.group.put&&(t=(e=this.options.group).name,e=e.put,n=D.sortable.options.group,e.join&&-1<e.indexOf(n.name)||n.name&&t&&n.name===t)},_allowSwap:function(){var t,e,n,o,i=r(C,x);return nt=i<0?x.nextSibling:x,M!==x?!(P=0):(t=g(x),o=(e="vertical"===(n="function"==typeof this.options.direction?this.options.direction.call(T,_,this):this.options.direction))?T.clientY:T.clientX,n=x["vertical"===n?"offsetHeight":"offsetWidth"],o=o>=(e?t.top:t.left)&&o<(e?t.bottom:t.right)-n/2?-1:1,P!==o&&((P=o)<0?0<i:i<0))},_onMove:function(t,e){var n,o,i;this._allowPut()&&(this._dispatchEvent("onMove",a(a({},this._getFromTo()),{},{event:t})),S=this.el,x=p(e,this.options.draggable,S),S===w.sortable.el||e!==S&&function(t,e){for(var n=t.lastElementChild;n&&(n===F.ghost||"none"===y(n,"display")||e&&!v(n,e));)n=n.previousElementSibling;return n}(S)?x&&!x.animated&&this._allowSwap()&&x!==C&&!G(x,C)&&(S!==w.sortable.el?this._onInsert(t,!1):(n=t,o=O,i=i||g(o),n.clientX<=i.right&&n.clientX>=i.left&&n.clientY>=i.top&&n.clientY<=i.bottom&&e===O||this._onChange(t)),M=x):(M=null,this._onInsert(t,!0)))},_onInsert:function(t,e){var n=e?C:x;O=e?S:x.parentNode,w.sortable.animator.collect(C,null,C.parentNode,C),this.animator.collect(null,n,O,C),this.multiplayer.onChange(C,this),b={sortable:this,node:n,rect:g(n),offset:d(n,S)},N&&this.el!==D.sortable.el&&w.sortable.el===D.sortable.el&&(y(_,"display",""),D.sortable.options.group.revertClone||_.parentNode.insertBefore(_,C),D.sortable.multiplayer.toggleElementsVisible(!0)),w.sortable._dispatchEvent("onRemove",a(a({},this._getFromTo()),{},{event:t})),e?O.appendChild(C):O.insertBefore(C,x),this._dispatchEvent("onAdd",a(a({},this._getFromTo()),{},{event:t})),N&&this.el===D.sortable.el&&(y(_,"display","none"),D.sortable.multiplayer.toggleElementsVisible(!1)),w.sortable.animator.animate(),this.animator.animate(),w.sortable=this},_onChange:function(t){O=x.parentNode,this.animator.collect(C,x,O),this.multiplayer.onChange(C,this),b={sortable:this,node:x,rect:g(x),offset:d(x,S)},this._dispatchEvent("onChange",a(a({},this._getFromTo()),{},{event:t})),O.insertBefore(C,nt),this.animator.animate(),w.sortable=this},_onDrop:function(t){J(t),this._cancelStart(),this._unbindEvents(),this.autoScroller.clear(),_&&D&&T?this._onEnd(t):this.options.multiple&&this.multiplayer.onSelect(D,t,a({},w)),this._clearState()},_onEnd:function(t){w.sortable=D.sortable;var e=w.sortable.el!==b.sortable.el,n=(!this.options.swapOnDrop||N&&e||O.insertBefore(_,C),b.rect=g(C),b.offset=d(C,S),b.node===C&&(b.node=_),this.multiplayer.onDrop(D,S,e),this.multiplayer.getOnEndParams()),o=e||Z(w.offset,b.offset),o=a(a({},this._getFromTo()),{},{changed:o,event:t},n);e&&w.sortable._dispatchEvent("onDrop",o),b.sortable._dispatchEvent("onDrop",o),N&&e&&!this.multiplayer.active()?f(C,this.options.chosenClass,!1):O.removeChild(C),y(_,"display",""),B&&y(document.body,"user-select","")},_getFromTo:function(){var t=this.multiplayer.getEmits();return{from:a(a({},t.from),w),to:a(a({},t.to),b)}},_dispatchEvent:function(t){t=this.options[t];"function"==typeof t&&t(a({},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))},_clearState:function(){this.multiplayer.destroy(),E&&E.destroy(),b=w=E=S=_=x=nt=C=O=D=T=M=N=I=P=ot=F.clone=F.ghost=F.active=F.dragged=null},_unbindEvents:function(){var e=this;i.move.forEach(function(t){return o(I,t,e._nearestSortable)}),i.end.forEach(function(t){return o(I,t,e._onDrop)})}},F.utils={on:u,off:o,css:y,index:function(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||e&&!v(t,e)||"none"===y(t,"display")||n++;return n},closest:p,getOffset:d,toggleClass:f,detectDirection:K},F.get=function(t){return t[X]},F.create=function(t,e){return new F(t,e)},F});
