/*!
 * sortable-dnd v0.6.6
 * open source under the MIT license
 * https://github.com/mfuu/sortable-dnd#readme
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Sortable=e()}(this,(function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){return e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},e.apply(this,arguments)}var n={capture:!1,passive:!1},o=/\s+/g;function i(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var r=i(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),s=i(/Edge/i),a=i(/safari/i)&&!i(/chrome/i)&&!i(/android/i),l=function(){var t=!1;return document.addEventListener("checkIfSupportPassive",null,{get passive(){return t=!0,!0}}),t}(),c=function(){if("undefined"==typeof window||"undefined"==typeof document)return{};var t=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return{dom:"WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1],lowercase:e,css:"-"+e+"-",js:e[0].toUpperCase()+e.substr(1)}}();function h(t,e){t.style["".concat(c.css,"transition-duration")]=e?"".concat(e,"ms"):""}function u(t,e){t.style["".concat(c.css,"transform")]=e?"".concat(e):""}function d(t,e,o){window.addEventListener?t.addEventListener(e,o,!(!l&&r)&&n):window.attachEvent?t.attachEvent("on"+e,o):t["on"+e]=o}function p(t,e,o){window.removeEventListener?t.removeEventListener(e,o,!(!l&&r)&&n):window.detachEvent?t.detachEvent("on"+e,o):t["on"+e]=null}function m(){return document.scrollingElement||document.documentElement}function f(t,e,n){if(t.getBoundingClientRect||t===window){var o,i,r,s,a,l,c;if(t!==window&&t.parentNode&&t!==m()?(i=(o=t.getBoundingClientRect()).top,r=o.left,s=o.bottom,a=o.right,l=o.height,c=o.width):(i=0,r=0,s=window.innerHeight,a=window.innerWidth,l=window.innerHeight,c=window.innerWidth),e&&t!==window){n=n||t.parentNode;do{if(n&&n.getBoundingClientRect){var h=n.getBoundingClientRect();i-=h.top+parseInt(E(n,"border-top-width")),r-=h.left+parseInt(E(n,"border-left-width")),s=i+o.height,a=r+o.width;break}}while(n=n.parentNode)}return{top:i,left:r,bottom:s,right:a,width:c,height:l}}}function g(t,e,n,o){if(!t)return null;if(n&&!e){var i=Array.prototype.slice.call(n.children),r=i.indexOf(t);if(r>-1)return i[r];for(var s=0;s<i.length;s++)if(v(t,i[s]))return i[s]}n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&x(t,e):x(t,e))||o&&t===n)return t;if(t===n)break}while(t=t.parentNode);return null}function v(t,e){if(!t||!e)return!1;if(e.compareDocumentPosition)return!!(16&e.compareDocumentPosition(t));if(e.contains&&1===t.nodeType)return e.contains(t)&&e!==t;for(;t=t.parentNode;)if(t===e)return!0;return!1}function y(t,e){for(var n=t.lastElementChild;n&&(n===ot.ghost||"none"===E(n,"display")||e&&!x(n,e));)n=n.previousElementSibling;return n||null}function w(t,e){if(!t||!t.parentNode)return-1;for(var n=0;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||e&&!x(t,e)||"none"===E(t,"display")||n++;return n}function b(t,e,n,o){for(var i=0,r=0,s=t.children;i<s.length;){if(s[i]!==ot.ghost&&"none"!==E(s[i],"display")&&g(s[i],n,t,!1)&&(o||s[i]!==ot.dragged)){if(r===e)return s[i];r++}i++}return null}function _(t,e){var n=E(t),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=b(t,0,e),a=b(t,1,e),l=i&&E(i),c=a&&E(a),h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+f(i).width,u=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+f(a).width,d=s||r?"cssFloat":"float";if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&l.float&&"none"!==l.float){var p="left"===l.float?"left":"right";return!a||"both"!==c.clear&&c.clear!==p?"horizontal":"vertical"}return i&&("block"===l.display||"flex"===l.display||"table"===l.display||"grid"===l.display||h>=o&&"none"===n[d]||a&&"none"===n[d]&&h+u>o)?"vertical":"horizontal"}function S(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(o," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(o," ")}}function x(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function E(t,e,n){var o=t&&t.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in o||-1!==e.indexOf("webkit")||(e="-webkit-"+e),o[e]=n+("string"==typeof n?"":"px")}}function D(t,e){var n,o,i=(o=e,(n=t).compareDocumentPosition?n.compareDocumentPosition(o):n.contains?(n!=o&&n.contains(o)&&16)+(n!=o&&o.contains(n)&&8)+(n.sourceIndex>=0&&o.sourceIndex>=0?(n.sourceIndex<o.sourceIndex&&4)+(n.sourceIndex>o.sourceIndex&&2):1):0);return 2===i?1:4===i?-1:0}function C(t){void 0!==t.preventDefault&&t.cancelable&&t.preventDefault()}function M(t){var n=t.sortable,o=t.name,i=t.params,r=n.options[o];"function"==typeof r&&r(e({},i))}var T,N,I="Sortable"+Date.now();function P(t){this.options=t,this.autoScrollAnimationFrame=null}function O(t){this.options=t,this.animations=[]}function A(t){this.options=t||{},this.selectedElements=[]}window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,17)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),P.prototype={destroy:function(){this.autoScrollAnimationFrame&&(cancelAnimationFrame(this.autoScrollAnimationFrame),this.autoScrollAnimationFrame=null)},update:function(t,e,n){var o=this;cancelAnimationFrame(this.autoScrollAnimationFrame),this.autoScrollAnimationFrame=requestAnimationFrame((function(){e&&n&&o.autoScroll(t,n),o.update(t,e,n)}))},autoScroll:function(t,e){if(t&&void 0!==e.clientX&&void 0!==e.clientY){var n=f(t);if(n){var o=e.clientX,i=e.clientY,r=n.top,s=n.right,a=n.bottom,l=n.left,c=n.height,h=n.width;if(!(i<r||o>s||i>a||o<l)){var u=this.options,d=u.scrollThreshold,p=u.scrollSpeed,m=t.scrollTop,g=t.scrollLeft,v=t.scrollHeight,y=m>0&&i>=r&&i<=r+d,w=g+h<t.scrollWidth&&o<=s&&o>=s-d,b=m+c<v&&i<=a&&i>=a-d,_=0,S=0;g>0&&o>=l&&o<=l+d&&(_=Math.floor(Math.max(-1,(o-l)/d-1)*p.x)),w&&(_=Math.ceil(Math.min(1,(o-s)/d+1)*p.x)),y&&(S=Math.floor(Math.max(-1,(i-r)/d-1)*p.y)),b&&(S=Math.ceil(Math.min(1,(i-a)/d+1)*p.y)),t.scrollTop+=S,t.scrollLeft+=_}}}}},O.prototype={collect:function(t){if(t){for(var e=f(t),n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=Math.min(e.right,n),r=Math.min(e.bottom,o),s=Array.prototype.slice.call(t.children),a=[],l=0;l<=s.length;l++){var c=s[l];if(c&&c!==ot.ghost&&"none"!==E(c,"display")){var h=f(c);if(!(h.bottom<0||h.right<0)){if(h.top-h.height>r||h.left-h.width>i)break;a.push({node:c,rect:h})}}}this.animations.push(a)}},animate:function(){for(var t=this.animations.pop(),e=0,n=t.length;e<n;e++){var o=t[e],i=o.node,r=o.rect;this._excute(i,r)}},_excute:function(t,e){var n=e.left,o=e.top,i=f(t);if(i.top!==o||i.left!==n){var r=o-i.top,s=n-i.left;h(t),u(t,"translate3d(".concat(s,"px, ").concat(r,"px, 0)")),t.offsetWidth,h(t,this.options.animation),u(t,"translate3d(0px, 0px, 0px)"),clearTimeout(t.animated),t.animated=setTimeout((function(){h(t),u(t,""),t.animated=null}),this.options.animation)}}},A.prototype={destroy:function(){T=N=null},active:function(){return!!T},setParams:function(t){t.nodes=T||[],t.clones=N||[]},select:function(t){S(t,this.options.selectedClass,!0),this.selectedElements.push(t),this.selectedElements.sort((function(t,e){return D(t,e)}))},deselect:function(t){var e=this.selectedElements.indexOf(t);e>-1&&(S(t,this.options.selectedClass,!1),this.selectedElements.splice(e,1))},getGhostElement:function(){if(!T)return null;var t=document.createElement("div");return this.selectedElements.forEach((function(e,n){var o=e.cloneNode(!0),i=0===n?1:.5;o.style="position: absolute;left: 0;top: 0;bottom: 0;right: 0;opacity: ".concat(i,";z-index: ").concat(n,";"),t.appendChild(o)})),t},toggleSelected:function(t,e){var n=this;e?t.forEach((function(t){return n.selectedElements.push(t)})):this.selectedElements=this.selectedElements.filter((function(e){return t.indexOf(e)<0}))},toggleClass:function(t){if(T)for(var e=0;e<T.length;e++)S(T[e],this.options.chosenClass,t)},toggleVisible:function(t){if(T)if(t){var e=T.indexOf(ot.dragged);this._viewElements(T,e,ot.dragged)}else this._hideElements(T)},onChoose:function(){!this.options.multiple||!this.selectedElements.length||this.selectedElements.indexOf(ot.dragged)<0||(this.selectedElements.sort((function(t,e){return D(t,e)})),T=this.selectedElements,this.toggleClass(!0))},onDrag:function(t){T&&(t.animator.collect(ot.dragged.parentNode),this._hideElements(T),t.animator.animate(),this.toggleClass(!1))},onDrop:function(t,e,n){if(T){var o=ot.dragged,i=ot.clone,r=T.indexOf(o);e[I].animator.collect(i.parentNode),t!==e&&"clone"===n?(E(i,"display","none"),N=T.map((function(t){return t.cloneNode(!0)})),this._viewElements(N,r,i),this._viewElements(T,r,o)):this._viewElements(T,r,i),e[I].animator.animate(),t!==e&&(e[I].multiplayer.toggleSelected(N||T,!0),"clone"!==n&&t[I].multiplayer.toggleSelected(T,!1))}},onSelect:function(t,e,n){var o=this.selectedElements.indexOf(e);S(e,this.options.selectedClass,o<0);var i={from:n.el,event:t,node:e,index:w(e)};o<0?(this.selectedElements.push(e),M({sortable:n,name:"onSelect",params:i})):(this.selectedElements.splice(o,1),M({sortable:n,name:"onDeselect",params:i})),this.selectedElements.sort((function(t,e){return D(t,e)}))},_viewElements:function(t,e,n){for(var o=0;o<t.length;o++)if(E(t[o],"display",""),o<e)n.parentNode.insertBefore(t[o],n);else{var i=o>0?t[o-1]:n;n.parentNode.insertBefore(t[o],i.nextSibling)}},_hideElements:function(t){for(var e=0;e<t.length;e++)t[e]!=ot.dragged&&E(t[e],"display","none")}};var H,X,Y,L,W,k,R,B,F,z,j,G,V,q,U,K,Z,J,Q,$,tt,et=[],nt=function(e){var n={},o=e.group;o&&"object"==t(o)||(o={name:o,pull:!0,put:!0,revertDrag:!0}),n.name=o.name,n.pull=o.pull,n.put=o.put,n.revertDrag=o.revertDrag,e.group=n};function ot(t,n){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable-dnd: `el` must be an HTMLElement, not ".concat({}.toString.call(t));t[I]=this,this.el=t,this.options=n=e({},n);var o={store:null,disabled:!1,group:"",lockAxis:"",animation:150,draggable:null,handle:null,multiple:!1,selectHandle:null,customGhost:null,direction:"",autoScroll:!0,scrollThreshold:55,scrollSpeed:{x:10,y:10},delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,ghostClass:"",ghostStyle:{},chosenClass:"",selectedClass:"",swapOnDrop:!0,fallbackOnBody:!1,supportTouch:"ontouchstart"in window,emptyInsertThreshold:-5};for(var i in o)!(i in this.options)&&(this.options[i]=o[i]);for(var r in nt(n),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));d(t,this.options.supportTouch?"touchstart":"mousedown",this._onDrag),et.push(t),this.autoScroller=new P(this.options),this.multiplayer=new A(this.options),this.animator=new O(this.options)}return ot.prototype={constructor:ot,_onDrag:function(t){var e=this;if(!X&&!this.options.disabled&&this.options.group.pull&&(!/mousedown|pointerdown/.test(t.type)||0===t.button)){var n=t.touches&&t.touches[0],o=(n||t).target;if(!a||!o||"SELECT"!==o.tagName.toUpperCase()){var i=g(o,this.options.draggable,this.el);if(i&&!i.animated){B={original:t,clientX:(n||t).clientX,clientY:(n||t).clientY},X=i,d(j=n?X:document,"mouseup",this._onDrop),d(j,"touchend",this._onDrop),d(j,"touchcancel",this._onDrop);var l=this.options,c=l.handle,h=l.selectHandle;if("function"==typeof h&&h(t)||"string"==typeof h&&x(o,h))q=!0;else if(("function"!=typeof c||c(t))&&("string"!=typeof c||x(o,c))){var u=this.options,p=u.delay,m=u.delayOnTouchOnly;!p||m&&!n||s||r?this._onStart(n,t):(d(this.el.ownerDocument,"touchmove",this._delayMoveHandler),d(this.el.ownerDocument,"mousemove",this._delayMoveHandler),d(this.el.ownerDocument,"mouseup",this._cancelStart),d(this.el.ownerDocument,"touchend",this._cancelStart),d(this.el.ownerDocument,"touchcancel",this._cancelStart),V=setTimeout((function(){return e._onStart(n,t)}),p)),d(document,"selectstart",C),a&&E(document.body,"user-select","none")}}}}},_delayMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-B.clientX),Math.abs(e.clientY-B.clientY))>=Math.floor(this.options.touchStartThreshold/(window.devicePixelRatio||1))&&this._cancelStart()},_cancelStart:function(){clearTimeout(V),p(this.el.ownerDocument,"touchmove",this._delayMoveHandler),p(this.el.ownerDocument,"mousemove",this._delayMoveHandler),p(this.el.ownerDocument,"mouseup",this._cancelStart),p(this.el.ownerDocument,"touchend",this._cancelStart),p(this.el.ownerDocument,"touchcancel",this._cancelStart),p(document,"selectstart",C),a&&E(document.body,"user-select","")},_onStart:function(t,e){var n=w(X);U=this.el,K=this.el,J=n,Q=n,$=n,tt=X,H=this.el,W=X.cloneNode(!0),R=X.parentNode,Z=this.options.group.pull,ot.clone=W,ot.active=this,ot.dragged=X,S(X,this.options.chosenClass,!0),this.multiplayer.onChoose(),M({sortable:this,name:"onChoose",params:this._getParams(e)}),d(j,t?"touchmove":"mousemove",this._nearestSortable);try{document.selection?setTimeout((function(){return document.selection.empty()}),0):window.getSelection().removeAllRanges()}catch(t){}},_onStarted:function(){S(W,this.options.chosenClass,!0),this._appendGhost(),this.multiplayer.onDrag(this),M({sortable:this,name:"onDrag",params:this._getParams(B.original)}),E(X,"display","none"),S(X,this.options.chosenClass,!1),X.parentNode.insertBefore(W,X)},_getGhostElement:function(){var t=this.options.customGhost;if("function"==typeof t){var e=this.multiplayer.selectedElements;return t(e.length?e:[X])}return this.multiplayer.getGhostElement()||X},_appendGhost:function(){if(!k){var t=this.options.fallbackOnBody?document.body:this.el,n=this._getGhostElement();S(k=n.cloneNode(!0),this.options.ghostClass,!0);var o,i=f(X),r=e({position:"fixed",top:i.top,left:i.left,width:i.width,height:i.height,minWidth:i.width,minHeight:i.height,opacity:"0.8",overflow:"hidden","z-index":"100000","box-sizing":"border-box","pointer-events":"none"},this.options.ghostStyle);for(var s in r)E(k,s,r[s]);o="none",k.style["".concat(c.css,"transition")]=o?"none"===o?"none":"".concat(o):"",u(k,"translate3d(0px, 0px, 0px)"),ot.ghost=k,t.appendChild(k);var a=(B.clientX-i.left)/parseInt(k.style.width)*100,l=(B.clientY-i.top)/parseInt(k.style.height)*100;E(k,"transform-origin","".concat(a,"% ").concat(l,"%")),E(k,"transform","translateZ(0)"),E(k,"will-change","transform")}},_nearestSortable:function(t){C(t);var e=t.touches&&t.touches[0]||t;if(X&&function(t){var e=F||B;return!(void 0!==t.clientX&&void 0!==t.clientY&&Math.abs(t.clientX-e.clientX)<=0&&Math.abs(t.clientY-e.clientY)<=0)}(e)){!F&&this._onStarted();var n=this.options.lockAxis,o="x"===n?B.clientX:e.clientX,i="y"===n?B.clientY:e.clientY,r=document.elementFromPoint(o,i),s=o-B.clientX,a=i-B.clientY;if(F={original:t,clientX:o,clientY:i},u(k,"translate3d(".concat(s,"px, ").concat(a,"px, 0)")),this.options.autoScroll){var l=function(t,e){if(!t||!t.getBoundingClientRect)return m();var n=t,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=E(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return m();if(o||e)return n;o=!0}}}while(n=n.parentNode);return m()}(r,!0);this.autoScroller.update(l,B,F)}var c,h,d,p=(c=o,h=i,et.some((function(t){var e=t[I].options.emptyInsertThreshold;if(null!=e){var n=f(t),o=c>=n.left-e&&c<=n.right+e,i=h>=n.top-e&&h<=n.bottom+e;return o&&i?d=t:void 0}})),d);p&&p[I]._onMove(t,r)}},_allowPut:function(){if(H===this.el)return!0;if(this.options.group.put){var t=this.options.group,e=t.name,n=t.put,o=H[I].options.group;return n.join&&n.indexOf(o.name)>-1||o.name&&e&&o.name===e}return!1},_getDirection:function(){var t=this.options,e=t.draggable,n=t.direction;return n?"function"==typeof n?n.call(F.original,X,this):n:_(R,e)},_allowSwap:function(){var t=f(Y),e="vertical"===this._getDirection(),n=e?"top":"left",o=e?"bottom":"right",i=Y[e?"offsetHeight":"offsetWidth"],r=e?F.clientY:F.clientX,s=r>=t[n]&&r<t[o]-i/2?-1:1,a=b(R,0,this.options.draggable),l=y(R),c=f(a),h=f(l);if(Y===R||v(R,Y))return W===a&&r<c[n]?(L=Y,!0):W===l&&r>h[o]&&(L=Y.nextSibling,!0);var u=D(W,Y);return L=u<0?Y.nextSibling:Y,z!==Y?(G=s,!0):G!==s&&(G=s,s<0?u>0:u<0)},_onMove:function(t,e){if(this._allowPut()){if(M({sortable:this,name:"onMove",params:this._getParams(t)}),this.el!==K&&(e===this.el||!y(this.el)))return Y=z=null,void this._onInsert(t);(Y=g(e,this.options.draggable,this.el))&&!Y.animated&&this._allowSwap()&&(Y!==W&&L!==W?(this.el!==K?this._onInsert(t):Y!==X&&this._onChange(t),z=Y):z=Y)}},_onInsert:function(t){var e=Y||W,n="clone"===Z&&this.el!==H&&K===H,o="clone"===Z&&this.el===H&&K!==H;U=this.el,J=w(W),tt=e,R=Y?Y.parentNode:this.el,K[I].animator.collect(W.parentNode),this.animator.collect(R),n&&(E(X,"display",""),H[I].multiplayer.toggleVisible(!0),H[I].options.group.revertDrag||K.insertBefore(X,W)),o&&(J=w(X),E(X,"display","none"),this.multiplayer.toggleVisible(!1)),Y?R.insertBefore(W,G<0?Y:Y.nextSibling):R.appendChild(W),Q=w(W),n&&H[I].options.group.revertDrag&&M({sortable:H[I],name:"onChange",params:this._getParams(t,{to:H,target:X,newIndex:$,revertDrag:!0})}),n||M({sortable:K[I],name:"onRemove",params:this._getParams(t)}),o&&Y!==X&&M({sortable:this,name:"onChange",params:this._getParams(t,{from:H,backToOrigin:!0})}),o||M({sortable:this,name:"onAdd",params:this._getParams(t)}),K[I].animator.animate(),this.animator.animate(),K=this.el},_onChange:function(t){R=Y.parentNode,J=w(W),tt=Y,this.animator.collect(R),R.insertBefore(W,L),Q=w(W),M({sortable:this,name:"onChange",params:this._getParams(t)}),this.animator.animate(),K=this.el},_onDrop:function(t){C(t),this._cancelStart(),p(j,"touchmove",this._nearestSortable),p(j,"mousemove",this._nearestSortable),p(j,"mouseup",this._onDrop),p(j,"touchend",this._onDrop),p(j,"touchcancel",this._onDrop),S(X,this.options.chosenClass,!1),H&&(K=H,J=$,tt===W&&(tt=X),this.multiplayer.toggleClass(!1),M({sortable:this,name:"onUnchoose",params:this._getParams(t)}),F&&this._onEnd(t));var e=this.options,n=e.multiple,o=e.selectHandle;if(n&&(o&&q||!o&&!H)){var i=t.changedTouches?t.changedTouches[0]:t,r=i.clientX-B.clientX,s=i.clientY-B.clientY,a=Math.sqrt(r*r+s*s);a>=0&&a<=1&&this.multiplayer.onSelect(t,X,this)}k&&k.parentNode&&k.parentNode.removeChild(k),this.multiplayer.destroy(),this.autoScroller.destroy(),this._nulling()},_onEnd:function(t){var e=this._getParams(t);this.multiplayer.onDrop(K,U,Z);var n=this.options.swapOnDrop;"clone"===Z&&K!==U||!("function"==typeof n?n(e):n)||R.insertBefore(X,W),"clone"!==Z||K===U||this.multiplayer.active()?W&&W.parentNode&&W.parentNode.removeChild(W):S(W,this.options.chosenClass,!1),E(X,"display",""),K!==U&&M({sortable:K[I],name:"onDrop",params:e}),M({sortable:U[I],name:"onDrop",params:e})},_getParams:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={};return o.event=t,o.to=U,o.from=K,o.node=X,o.clone=W,o.target=tt,o.oldIndex=J,o.newIndex=Q,o.pullMode=Z,this.multiplayer.setParams(o),e(o,n),o.relative=o.target===X?0:D(o.target,W),o},_nulling:function(){U=K=H=X=Y=L=W=k=R=Z=J=Q=$=B=F=tt=z=j=G=V=q=ot.clone=ot.ghost=ot.active=ot.dragged=null},destroy:function(){this._cancelStart(),this._nulling(),p(this.el,"touchstart",this._onDrag),p(this.el,"mousedown",this._onDrag),et.splice(et.indexOf(this.el),1),this.el[I]=this.animator=this.multiplayer=this.autoScroller=null},option:function(t,e){if(void 0===e)return this.options[t];this.options[t]=e,this.animator.options[t]=e,this.multiplayer.options[t]=e,this.autoScroller.options[t]=e,"group"===t&&nt(this.options)},select:function(t){this.multiplayer.select(t)},deselect:function(t){this.multiplayer.deselect(t)},getSelectedElements:function(){return this.multiplayer.selectedElements}},ot.utils={on:d,off:p,css:E,index:w,closest:g,getRect:f,toggleClass:S,detectDirection:_},ot.get=function(t){return t[I]},ot.create=function(t,e){return new ot(t,e)},ot}));
